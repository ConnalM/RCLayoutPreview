<Window x:Class="RCLayoutPreview.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RC Layout Editor Preview"
        Height="800"
        Width="1200"
        FontFamily="Segoe UI">
    <DockPanel LastChildFill="True">
        <!-- Top toolbar -->
        <StackPanel Orientation="Horizontal"
                    Margin="10"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    DockPanel.Dock="Top">
            <Button Content="Load Layout" Click="LoadLayout_Click" Margin="0,0,8,0"/>
            <Button Content="Load JSON" Click="LoadJson_Click" Margin="0,0,8,0"/>
            <Button Content="Preview" Click="Preview_Click" Margin="0,0,8,0"/>
            <Button Content="Save Layout" Click="SaveLayout_Click" Margin="0,0,8,0"/>
            <CheckBox x:Name="DebugModeToggle"
                      Content="Diagnostics Mode"
                      Margin="10,0,0,0"
                      VerticalAlignment="Center"
                      Checked="DebugModeToggle_Changed"
                      Unchecked="DebugModeToggle_Changed"/>
            <TextBlock x:Name="StatusLabel"
               Text="Ready"
               Foreground="Gray"
               Margin="10,4,0,4"
               VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Main content split between editor and preview -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="5" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBox x:Name="Editor"
                     Grid.Column="0"
                     AcceptsReturn="True"
                     AcceptsTab="True"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Auto"
                     FontFamily="Consolas"
                     FontSize="14"
                     TextWrapping="NoWrap"
                     Margin="5" />

            <Rectangle Grid.Column="1" Fill="LightGray" Width="1" />

            <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto" Margin="5">
                <Border BorderBrush="Gray" BorderThickness="1" Padding="5" Background="White">
                    <ContentControl x:Name="PreviewHost">
                        <StackPanel>
                            <TextBlock Text="{Binding GenericData.RaceName}" />
                            <TextBlock Text="{Binding GenericData.TrackName}" />
                            <TextBlock Text="{Binding GenericData.NextHeatNumber}" />
                            <TextBlock Text="{Binding Racers[0].Name}" />
                            <TextBlock Text="{Binding Racers[0].Lap}" />
                            <TextBlock Text="{Binding Racers[0].BestLapTime}" />
                            <TextBlock Text="{Binding Racers[0].GapLeader}" />
                        </StackPanel>
                    </ContentControl>
                </Border>
            </ScrollViewer>
        </Grid>
    </DockPanel>
</Window>