<Window x:Class="RCLayoutPreview.EditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:RCLayoutPreview"
        xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit"
        Title="RC Layout Editor"
        Height="800"
        Width="1000"
        FontFamily="Segoe UI">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top toolbar -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Button Content="Load Layout" Click="LoadLayout_Click" Margin="0,0,8,0"/>
            <Button Content="Load JSON" Click="LoadJson_Click" Margin="0,0,8,0"/>
            <Button Content="Save Layout" Click="SaveLayout_Click" Margin="0,0,8,0"/>
            <CheckBox x:Name="AutoUpdateToggle" Content="Auto-Update" IsChecked="True" Margin="10,0,0,0" VerticalAlignment="Center" 
                      Checked="AutoUpdateToggle_Changed" Unchecked="AutoUpdateToggle_Changed"/>
            <TextBlock Text="Delay (ms): " Margin="10,0,0,0" VerticalAlignment="Center"/>
            <TextBox x:Name="DelayInput" Width="50" Text="3000" VerticalAlignment="Center" TextChanged="DelayInput_TextChanged"/>
            <TextBlock x:Name="StatusLabel" Text="Ready" Foreground="Gray" Margin="10,4,0,4" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Editor area -->
        <Grid Grid.Row="1" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250" MinWidth="100"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*" MinWidth="200"/>
            </Grid.ColumnDefinitions>

            <!-- JSON Fields Panel -->
            <Border Grid.Column="0" x:Name="FieldsPanel" BorderBrush="#FFD0D0D0" BorderThickness="1">
                <TreeView x:Name="JsonFieldsTree"
                         AllowDrop="True"
                         PreviewMouseLeftButtonDown="JsonFieldsTree_PreviewMouseLeftButtonDown"
                         MouseDoubleClick="JsonFieldsTree_MouseDoubleClick"/>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1"
                         ResizeDirection="Columns"
                         ResizeBehavior="PreviousAndNext"
                         Background="#FFE0E0E0"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"/>

            <!-- XAML Editor Panel -->
            <Border Grid.Column="2" x:Name="EditorPanel" BorderBrush="#FFD0D0D0" BorderThickness="1">
                <avalonedit:TextEditor
                    x:Name="Editor"
                    FontFamily="Consolas"
                    FontSize="14"
                    ShowLineNumbers="True"
                    WordWrap="True"
                    SyntaxHighlighting="XML"
                    Background="White"
                    Foreground="Black"
                    HorizontalScrollBarVisibility="Auto"
                    VerticalScrollBarVisibility="Auto">
                    <avalonedit:TextEditor.Options>
                        <avalonedit:TextEditorOptions
                            EnableHyperlinks="True"
                            EnableEmailHyperlinks="True"
                            EnableVirtualSpace="False"
                            ShowSpaces="False"
                            ShowTabs="False"
                            ShowEndOfLine="False"
                            AllowToggleOverstrikeMode="False"
                            EnableRectangularSelection="True"
                            EnableTextDragDrop="True"
                            ConvertTabsToSpaces="True"
                            IndentationSize="4"/>
                    </avalonedit:TextEditor.Options>
                </avalonedit:TextEditor>
            </Border>
        </Grid>
    </Grid>
</Window>